(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{146:function(e,t,i){"use strict";i.r(t);var n,a=i(1),r=i.n(a),o=i(6),s=i.n(o),l=(i(82),i(22)),c=i(13),u=i(14),m=i(16),f=i(15),h=i(17),d=i(18),g=i.n(d),p=i(26),v=i.n(p),b=(i(85),i(76)),C=i(42),E=i.n(C),w={ALLOCATION_TYPES:{MANUAL:"MANUAL",MIN_REGRET:"MIN_REGRET",MIN_TIME:"MIN_TIME"},CHART_LABELS:(n={},Object(l.a)(n,"MANUAL","Standard A/B"),Object(l.a)(n,"MIN_REGRET","Min Regret (Accelerated Impact)"),Object(l.a)(n,"MIN_TIME","Min Time (Accelerated Learning)"),n),COLORS:["#ffda7c","#ff6090","#9a67ea","#6ec6ff"],MANUAL:"MANUAL",MIN_REGRET:"MIN_REGRET",MIN_TIME:"MIN_TIME"},R=function(e){return e.map(function(e){return parseInt(1e4*e)/100})},N={getConfidenceNumbers:function(e){var t=e[0].trafficAllocation.length-1,i=[{pValues:Array(t).fill(1),confidenceIntervals:Array(t).fill([-1/0,1/0])}];return e.forEach(function(e){i.push({pValues:Object.values(e.stats).map(function(e){return e.pValue}),confidenceIntervals:Object.values(e.stats).map(function(e){return e.confInterval})})}),i},getCounts:function(e){var t=e[0].trafficAllocation.length,i=[{conversions:Array(t).fill(0),visitors:Array(t).fill(0),totalConversions:0,totalVisitors:0,counterfactualConversions:0,counterfactualRate:0,totalConversionRate:0}];return e.forEach(function(e){var n=g.a.cloneDeep(i[i.length-1]);n.visitors[e.variation]=n.visitors[e.variation]+1,n.totalVisitors=n.totalVisitors+1,e.convert&&(n.conversions[e.variation]=n.conversions[e.variation]+1,n.totalConversions=n.totalConversions+1),n.counterfactualRate=function(e,t){var i,n=1/t,a=0;for(i=0;i<t;i++)a+=e.conversions[i]/e.visitors[i]*n;return Number.isNaN(a)?0:100*a}(n,t),n.counterfactualConversions=function(e,t){var i,n=1/t,a=0;for(i=0;i<t;i++)a+=e.conversions[i]/e.visitors[i]*(n*e.totalVisitors);return Number.isNaN(a)?0:parseInt(a)}(n,t),n.totalConversionRate=Number.isNaN(n.totalConversions/n.totalVisitors)?0:n.totalConversions/n.totalVisitors*100,i.push(n)}),i},getDistributions:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=Array(e[0].trafficAllocation.length).fill([]),n=R(g.a.cloneDeep(e[0].trafficAllocation)),a=[];return i.forEach(function(e,t){a[t]=[n[t]]}),e.forEach(function(e,n){var r=R(e.trafficAllocation);i.forEach(function(e,i){n%t||a[i].push(r[i])})}),a}},y=(i(143),i(75)),T=i.n(y),x=function(e){function t(){var e,i;Object(c.a)(this,t);for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(i=Object(m.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(a)))).getDistributionData=function(){var e=i.props,t=e.counterfactualEnabled,n=e.counts,a=e.distributions,r=e.position,o=e.sampleRate,s=e.showTotals,l=e.variations,c=[];if(Array(l).fill(1).forEach(function(e,t){c.push({color:w.COLORS[t],name:t?"Variation ".concat(t):"Original",data:a[t].slice(0,Math.ceil(r/o)+1),animation:{duration:0}})}),t){for(var u=[],m=[],f=[],h=[],d=0;d<=r;)u.push(n[d].totalConversionRate),m.push(n[d].counterfactualRate),f.push(n[d].totalConversions),h.push(n[d].counterfactualConversions),d+=o;c.push({animation:{duration:0},color:"black",dashStyle:"solid",data:u,lineWidth:2,marker:{enabled:!1},name:"Total Conversion Rate",tooltip:{split:!0,valueDecimals:2,valueSuffix:"%"},type:"spline",yAxis:1}),c.push({animation:{duration:0},color:"black",dashStyle:"shortdot",data:m,lineWidth:2,marker:{enabled:!1},name:"Counterfactual Conversion Rate",tooltip:{split:!0,valueDecimals:2,valueSuffix:"%"},type:"spline",yAxis:1}),s&&(c.push({animation:{duration:0},color:"white",data:f,lineWidth:2,marker:{enabled:!1},name:"Total Conversions",tooltip:{split:!0},type:"spline",yAxis:2}),c.push({animation:{duration:0},color:"white",dashStyle:"shortdot",data:h,lineWidth:2,marker:{enabled:!1},name:"Counterfactual Conversions",tooltip:{split:!0},type:"spline",yAxis:2}))}return g.a.cloneDeep(c)},i}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.chartRef,i=e.counterfactualEnabled,n=e.distributions,a=e.policy,o=e.sampleRate,s=e.showTotals,l={chart:{height:"36%",type:i?"area":"line",width:1e3},credits:{enabled:!1},plotOptions:{line:{marker:{enabled:!1}}},tooltip:{formatter:function(){return["<b>"+this.x*o+" visitors</b>"].concat(this.points.map(function(e){var t=e.y,i="% of Traffic";return e.series.name.includes("Rate")&&(i="%"),e.series.name.includes("Conversions")||(t=Number(e.y).toFixed(2)+i),e.series.name+": "+t}))},split:!0,valueSuffix:"% of Traffic"},series:this.getDistributionData(),title:{text:w.CHART_LABELS[a]},xAxis:{labels:{formatter:function(){return this.value*o}},min:0,max:parseInt(n[0].length),title:{text:"Visitors"}},yAxis:[{endOnTick:!0,labels:{formatter:function(){return this.value+"%"}},title:{text:"Distribution"}}]};return i&&(l.plotOptions={area:{lineWidth:0,fillOpacity:1,marker:{enabled:!1},stacking:"percent"}},l.yAxis.push({opposite:!0,labels:{formatter:function(){return this.value+"%"}},max:60,min:40,title:{style:{color:"black"},text:"Conversion Rate"}})),s&&l.yAxis.push({opposite:!0,title:{style:{color:"white"},text:"Conversions"}}),r.a.createElement("div",{className:"min-width--200"},r.a.createElement(T.a,{config:l,ref:t}))}}]),t}(a.Component),k=function(e){function t(){var e,i;Object(c.a)(this,t);for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(i=Object(m.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(a)))).formatPValue=function(){var e=i.props.pValue;return"".concat((100*(1-e)).toFixed(2),"%")},i}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.color,i=e.pValue,n=e.title;return r.a.createElement("div",{className:"flex flex--column flex-align--center soft--sides width--50"},r.a.createElement("h5",null,n),r.a.createElement("h3",{className:v()(Object(l.a)({},t,i<=.1))},this.formatPValue()))}}]),t}(a.Component),A=function(e){function t(){return Object(c.a)(this,t),Object(m.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.color,i=e.conversionCount,n=e.title,a=e.variationColor,o=e.visitorCount;return r.a.createElement("div",{className:"flex flex--column flex-align--center soft--sides"},r.a.createElement("h5",{style:{color:a}},n),r.a.createElement("p",{className:"micro muted"},"Conversions"),r.a.createElement("h3",{className:"".concat(t)},i),r.a.createElement("p",{className:"micro muted"},"Visitors"),r.a.createElement("h3",{className:"".concat(t)},o),r.a.createElement("p",{className:"micro muted"},"Conversion Rate"),r.a.createElement("h3",{className:"".concat(t)},"".concat(o?(i/o*100).toFixed(2):"0.00","%")))}}]),t}(a.Component),M=function(e){function t(){var e,i;Object(c.a)(this,t);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(i=Object(m.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(a)))).getVisitorCount=function(e){var t=i.props;return t.counts[t.position].visitors[e]},i.getConversionCount=function(e){var t=i.props;return t.counts[t.position].conversions[e]},i.getPValue=function(e){var t=i.props;return t.confidences[t.position].pValues[e]},i.isBetterThanBaseline=function(e){var t=i.getConversionCount(0)/i.getVisitorCount(0),n=i.getConversionCount(e)/i.getVisitorCount(e);return!Number.isNaN(t)&&!Number.isNaN(n)&&n>t},i.renderVariationCards=function(){var e=i.props,t=e.showVariationDetail,n=e.variations,a=0,o=0;return Array(n+1).fill(1).map(function(e,s){return s<n&&(a+=i.getConversionCount(s),o+=i.getVisitorCount(s)),!s&&t?r.a.createElement(A,{color:"black",conversionCount:i.getConversionCount(0),key:s,title:"Original",variationColor:w.COLORS[s],visitorCount:i.getVisitorCount(0)}):s===n?r.a.createElement(A,{color:"black",conversionCount:a,key:s,title:"Total",variationColor:"black",visitorCount:o}):t?r.a.createElement(A,{color:i.getPValue(s-1)<=.1?i.isBetterThanBaseline(s)?"green":"red":"black",conversionCount:i.getConversionCount(s),key:s,title:"Variation ".concat(s),variationColor:w.COLORS[s],visitorCount:i.getVisitorCount(s)}):null})},i.renderStatSigCards=function(){var e=i.props.variations;return Array(e-1).fill(1).map(function(e,t){return r.a.createElement(k,{color:i.isBetterThanBaseline(t+1)?"green":"red",key:t,pValue:i.getPValue(t),title:"Variation ".concat(t+1)})})},i}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.hideGraphs,i=e.policy,n=e.showVariationDetail,a=e.variations;return r.a.createElement("div",{className:v()({"border--left":!t,flex:!0,"flex-align--center":!0,"flex--column":!0,soft:t,"flex--space":!0,"flex--1":!0}),style:{minWidth:"".concat(125*(n?a:1),"px")}},t&&r.a.createElement("h1",null,w.CHART_LABELS[i]),r.a.createElement("div",{className:"flex flex--row flex--space width--100"},this.renderVariationCards()),n&&r.a.createElement(r.a.Fragment,null,r.a.createElement("h4",{className:"flex"},"Statistical Significance:"),r.a.createElement("div",{className:"flex flex--row flex--space width--100"},this.renderStatSigCards())))}}]),t}(a.Component),I=function(e){function t(e){var i;Object(c.a)(this,t),(i=Object(m.a)(this,Object(f.a)(t).call(this,e))).state={counterfactualEnabled:!0,currentPosition:0,enabledCharts:[w.MANUAL,w.MIN_REGRET],hideGraphs:!1,interval:null,isRunning:!1,marks:{},multiplier:1e3,showTotals:!1,showVariationDetail:!1},i.getNextSignificantPoint=function(){var e=i.state,t=e.currentPosition,n=e.marks,a=Object.keys(n).filter(function(e){return e>t});return a.length?Number(a[0]):t},i.getPreviousSignificantPoint=function(){var e=i.state,t=e.currentPosition,n=e.marks,a=Object.keys(n).filter(function(e){return e<t});return a.length?Number(a[a.length-1]):t},i.toggleCounterfactual=function(){i.setState(function(e){return{counterfactualEnabled:!e.counterfactualEnabled}})},i.toggleSeries=function(e){Object.values(i.chartRefs).forEach(function(t){t.current&&t.current.chart.series[e].visible?t.current.chart.series[e].hide():t.current&&!t.current.chart.series[e].visible&&t.current.chart.series[e].show()})},i.toggleTotals=function(){i.setState(function(e){return{showTotals:!e.showTotals}})},i.handleKeyDown=function(e){switch(e.keyCode){case 32:e.preventDefault(),i.state.isRunning?i.stopCounting():i.startCounting();break;case 48:i.toggleSeries(0);break;case 49:i.toggleSeries(1);break;case 50:i.toggleSeries(2);break;case 51:i.toggleSeries(3);break;case 65:i.toggleChart({target:{value:w.MANUAL}});break;case 67:i.toggleCounterfactual();break;case 69:i.stopCounting(),i.setCurrentPosition(i.maxVisitors);break;case 71:i.toggleCharts();break;case 73:i.toggleChart({target:{value:w.MIN_REGRET}});break;case 76:i.toggleChart({target:{value:w.MIN_TIME}});break;case 78:i.stopCounting(),i.setCurrentPosition(i.getNextSignificantPoint());break;case 80:i.stopCounting(),i.setCurrentPosition(i.getPreviousSignificantPoint());break;case 82:i.reset();break;case 84:i.toggleTotals()}},i.isChartEnabled=function(e){return i.state.enabledCharts.includes(e)},i.reset=function(){i.stopCounting(),i.setCurrentPosition(0)},i.setCurrentPosition=function(e){i.setState(function(){return{currentPosition:e}})},i.setTimelineMarks=function(){var e=g.a.cloneDeep(i.marks),t=[];Object.values(w.ALLOCATION_TYPES).forEach(function(n){i.isChartEnabled(n)||g.a.map(e,function(e){e.category===n&&t.push(e.key)})}),t.forEach(function(t){delete e[t]}),i.setState(function(){return{marks:e}})},i.startCounting=function(){i.state.currentPosition>=i.maxVisitors?i.setState(function(){return{currentPosition:0}},i.startInterval):i.startInterval(),i.setState(function(){return{isRunning:!0}})},i.startInterval=function(){i.setState(function(){return{interval:setInterval(function(){if(i.state.currentPosition>=i.maxVisitors)return i.stopCounting(),void i.startCounting();i.setState(function(e){return{currentPosition:e.currentPosition+e.multiplier>=i.maxVisitors?i.maxVisitors:e.currentPosition+e.multiplier}})},100)}})},i.stopCounting=function(){clearInterval(i.state.interval),i.setState(function(){return{interval:null,isRunning:!1}})},i.toggleChart=function(e){var t=e.target.value;if(i.state.enabledCharts.includes(t)){var n=g.a.cloneDeep(i.state.enabledCharts);i.setState(function(){return{enabledCharts:n.filter(function(e){return e!==t})}},i.setTimelineMarks)}else i.setState(function(e){var i=g.a.cloneDeep(e.enabledCharts);return i.push(t),{enabledCharts:i}},i.setTimelineMarks)},i.toggleCharts=function(e){i.setState(function(e){return{hideGraphs:!e.hideGraphs}})},i.sampleRate=window.uniform.length/500,i.minRegretDistributions=N.getDistributions(window.minRegret,i.sampleRate),i.minTimeDistributions=N.getDistributions(window.minTime,i.sampleRate),i.uniformDistributions=N.getDistributions(window.uniform,i.sampleRate),i.minRegretCounts=N.getCounts(window.minRegret),i.minTimeCounts=N.getCounts(window.minTime),i.uniformCounts=N.getCounts(window.uniform),i.minRegretConfidences=N.getConfidenceNumbers(window.minRegret),i.minTimeConfidences=N.getConfidenceNumbers(window.minTime),i.uniformConfidences=N.getConfidenceNumbers(window.uniform),i.maxVisitors=Math.max(window.minRegret.length,window.minTime.length,window.uniform.length),i.minRegretVariations=window.minRegret[0].trafficAllocation.length,i.minTimeVariations=window.minTime[0].trafficAllocation.length,i.uniformVariations=window.uniform[0].trafficAllocation.length,i.chartRefs={minRegretRef:r.a.createRef(),minTimeRef:r.a.createRef(),uniformRef:r.a.createRef()},i.marks=Object(l.a)({0:{style:{color:"grey"},label:"Start",category:"ALL"}},i.maxVisitors,{style:{color:"grey"},label:"End",category:"ALL"});for(var n={minRegret:new Array(i.minRegretVariations-1).fill(!1),minTime:new Array(i.minTimeVariations-1).fill(!1),uniform:new Array(i.uniformVariations-1).fill(!1)},a=0;a<i.maxVisitors;a++){var o=a+(i.sampleRate-a%i.sampleRate)+2*i.sampleRate;if(a)for(var s=0;s<i.minRegretVariations;s++)window.minTime[a].trafficAllocation[s]/window.minTime[a-1].trafficAllocation[s]<.1&&(i.marks[o]={style:{color:"gray",top:"-35px"},label:"Min Time Reallocation",category:w.MIN_TIME,key:o});for(var u=0;u<i.uniformVariations-1;u++)n.minRegret[u]!==window.minRegret[a].stats[(u+1).toString()].isSignificant&&(window.minRegret[a].stats[(u+1).toString()].confInterval.lower>0?i.marks[o]={style:{color:"green"},label:"Min Regret Significant",category:w.MIN_REGRET,key:o}:i.marks[o]={style:{color:"red"},label:"Min Regret Significant",category:w.MIN_REGRET,key:o},n.minRegret[u]=!n.minRegret[u]),n.minTime[u]!==window.minTime[a].stats[(u+1).toString()].isSignificant&&(window.minTime[a].stats[(u+1).toString()].confInterval.lower>0?i.marks[o]={style:{color:"green"},label:"Min Time Significant",category:w.MIN_TIME,key:o}:i.marks[o]={style:{color:"red"},label:"Min Time Significant",category:w.MIN_TIME,key:o},n.minTime[u]=!n.minTime[u]),n.uniform[u]!==window.uniform[a].stats[(u+1).toString()].isSignificant&&(window.uniform[a].stats[(u+1).toString()].confInterval.lower>0?i.marks[o]={style:{color:"green"},label:"A/B Test Significant",category:w.MANUAL,key:o}:i.marks[o]={style:{color:"red"},label:"A/B Test Significant",category:w.MANUAL,key:o},n.uniform[u]=!n.uniform[u])}return i}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.setTimelineMarks(),this.startCounting()}},{key:"render",value:function(){return r.a.createElement("div",{className:"flex flex-align--center width--100 flex--space"},r.a.createElement("div",{className:"soft--sides width--1200"},r.a.createElement("div",{className:"push--ends flex flex--row flex-align--center display--none"},r.a.createElement("div",{className:v()({"push-double--right":!0,flex:!0,"flex--column":!0})},r.a.createElement("div",{className:"flex--row micro"},r.a.createElement("input",{checked:this.isChartEnabled(w.MANUAL),id:w.MANUAL,onChange:this.toggleChart,type:"checkbox",value:w.MANUAL}),r.a.createElement("label",{htmlFor:w.MANUAL},"A/B")),r.a.createElement("div",{className:"flex--row micro"},r.a.createElement("input",{checked:this.isChartEnabled(w.MIN_REGRET),id:w.MIN_REGRET,onChange:this.toggleChart,type:"checkbox",value:w.MIN_REGRET}),r.a.createElement("label",{htmlFor:w.MIN_REGRET},"Min Regret")),r.a.createElement("div",{className:"flex--row micro"},r.a.createElement("input",{checked:this.isChartEnabled(w.MIN_TIME),id:w.MIN_TIME,onChange:this.toggleChart,type:"checkbox",value:w.MIN_TIME}),r.a.createElement("label",{htmlFor:w.MIN_TIME},"Min Time")),r.a.createElement("div",{className:"flex--row micro"},r.a.createElement("input",{checked:this.state.hideGraphs,id:"charts",onChange:this.toggleCharts,type:"checkbox"}),r.a.createElement("label",{htmlFor:"charts"},"Hide Graphs"))),r.a.createElement("div",{className:"push-double--right"},!this.state.interval&&r.a.createElement("button",{className:"no-padding",onClick:this.startCounting},r.a.createElement("div",{className:"flex square--50 flex-align--center flex-justify--center"},this.state.currentPosition!==this.maxVisitors&&r.a.createElement(E.a,{name:"play",size:"large"}),this.state.currentPosition===this.maxVisitors&&r.a.createElement(E.a,{name:"refresh",size:"large"}))),this.state.interval&&r.a.createElement("button",{className:"no-padding",onClick:this.stopCounting},r.a.createElement("div",{className:"flex square--50 flex-align--center flex-justify--center"},r.a.createElement(E.a,{name:"pause",size:"large"})))),r.a.createElement("div",{className:"flex flex--1 flex-align--center push-double--right"},r.a.createElement(b.a,{dots:!1,min:0,marks:this.state.marks,max:this.maxVisitors,onChange:this.setCurrentPosition,value:this.state.currentPosition}))),r.a.createElement("div",{className:v()({flex:this.state.hideGraphs,"flex--row":this.state.hideGraphs,"flex-justify--center":this.state.hideGraphs,"flex--space":this.state.hideGraphs})},this.isChartEnabled(w.MANUAL)&&r.a.createElement("div",{className:"flex flex--row border push--ends overflow--visible"},!this.state.hideGraphs&&r.a.createElement(x,{chartRef:this.chartRefs.uniformRef,counterfactualEnabled:this.state.counterfactualEnabled,counts:this.uniformCounts,distributions:this.uniformDistributions,policy:w.MANUAL,position:this.state.currentPosition,sampleRate:this.sampleRate,showTotals:this.state.showTotals,variations:this.uniformVariations}),r.a.createElement(M,{confidences:this.uniformConfidences,counts:this.uniformCounts,hideGraphs:this.state.hideGraphs,policy:w.MANUAL,position:this.state.currentPosition,showVariationDetail:this.state.showVariationDetail,variations:this.uniformVariations})),this.isChartEnabled(w.MIN_REGRET)&&r.a.createElement("div",{className:"flex flex--row border push--ends overflow--visible"},!this.state.hideGraphs&&r.a.createElement(x,{chartRef:this.chartRefs.minRegretRef,counterfactualEnabled:this.state.counterfactualEnabled,counts:this.minRegretCounts,distributions:this.minRegretDistributions,policy:w.MIN_REGRET,position:this.state.currentPosition,sampleRate:this.sampleRate,showTotals:this.state.showTotals,variations:this.minRegretVariations}),r.a.createElement(M,{confidences:this.minRegretConfidences,counts:this.minRegretCounts,hideGraphs:this.state.hideGraphs,policy:w.MIN_REGRET,position:this.state.currentPosition,showVariationDetail:this.state.showVariationDetail,variations:this.minRegretVariations})),this.isChartEnabled(w.MIN_TIME)&&r.a.createElement("div",{className:"flex flex--row border push--ends overflow--visible"},!this.state.hideGraphs&&r.a.createElement(x,{chartRef:this.chartRefs.minTimeRef,counterfactualEnabled:this.state.counterfactualEnabled,counts:this.minTimeCounts,distributions:this.minTimeDistributions,policy:w.MIN_TIME,position:this.state.currentPosition,sampleRate:this.sampleRate,showTotals:this.state.showTotals,variations:this.minTimeVariations}),r.a.createElement(M,{confidences:this.minTimeConfidences,counts:this.minTimeCounts,hideGraphs:this.state.hideGraphs,policy:w.MIN_TIME,position:this.state.currentPosition,showVariationDetail:this.state.showVariationDetail,variations:this.minTimeVariations})))))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(I,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},77:function(e,t,i){e.exports=i(146)},82:function(e,t,i){},85:function(e,t,i){}},[[77,2,1]]]);
//# sourceMappingURL=main.812c2b6d.chunk.js.map