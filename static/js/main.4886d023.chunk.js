(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{146:function(e,t,n){"use strict";n.r(t);var i,a=n(1),r=n.n(a),o=n(6),s=n.n(o),l=(n(82),n(21)),c=n(27),u=n(28),m=n(30),f=n(29),h=n(31),d=n(13),g=n.n(d),p=n(34),v=n.n(p),b=(n(85),n(72)),E=n.n(b),C=n(76),R=n(42),N=n.n(R),w={ALLOCATION_TYPES:{MANUAL:"MANUAL",MIN_REGRET:"MIN_REGRET",MIN_TIME:"MIN_TIME"},CHART_LABELS:(i={},Object(l.a)(i,"MANUAL","Standard A/B"),Object(l.a)(i,"MIN_REGRET","Min Regret (Accelerated Impact)"),Object(l.a)(i,"MIN_TIME","Min Time (Accelerated Learning)"),i),MANUAL:"MANUAL",MIN_REGRET:"MIN_REGRET",MIN_TIME:"MIN_TIME"},y=function(e){return e.map(function(e){return parseInt(1e4*e)/100})},T={getConfidenceNumbers:function(e){var t=e[0].trafficAllocation.length-1,n=[{pValues:Array(t).fill(1),confidenceIntervals:Array(t).fill([-1/0,1/0])}];return e.forEach(function(e){n.push({pValues:Object.values(e.stats).map(function(e){return e.pValue}),confidenceIntervals:Object.values(e.stats).map(function(e){return e.confInterval})})}),n},getCounts:function(e){var t=e[0].trafficAllocation.length,n=[{conversions:Array(t).fill(0),visitors:Array(t).fill(0),totalConversions:0,totalVisitors:0,counterfactualConversions:0,counterfactualRate:0,totalConversionRate:0}];return e.forEach(function(e){var i=g.a.cloneDeep(n[n.length-1]);i.visitors[e.variation]=i.visitors[e.variation]+1,i.totalVisitors=i.totalVisitors+1,e.convert&&(i.conversions[e.variation]=i.conversions[e.variation]+1,i.totalConversions=i.totalConversions+1),i.counterfactualRate=function(e,t){var n,i=1/t,a=0;for(n=0;n<t;n++)a+=e.conversions[n]/e.visitors[n]*i;return Number.isNaN(a)?0:100*a}(i,t),i.counterfactualConversions=function(e,t){var n,i=1/t,a=0;for(n=0;n<t;n++)a+=e.conversions[n]/e.visitors[n]*(i*e.totalVisitors);return Number.isNaN(a)?0:parseInt(a)}(i,t),i.totalConversionRate=Number.isNaN(i.totalConversions/i.totalVisitors)?0:i.totalConversions/i.totalVisitors*100,n.push(i)}),n},getDistributions:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=Array(e[0].trafficAllocation.length).fill([]),i=y(g.a.cloneDeep(e[0].trafficAllocation)),a=[];return n.forEach(function(e,t){a[t]=[i[t]]}),e.forEach(function(e,i){var r=y(e.trafficAllocation);n.forEach(function(e,n){i%t||a[n].push(r[n])})}),a}},x=(n(144),["#ffda7c","#ff6090","#9a67ea","#6ec6ff"]),k=function(e){function t(){var e,n;Object(c.a)(this,t);for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=Object(m.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(a)))).getDistributionData=function(){var e=n.props,t=e.counterfactualEnabled,i=e.counts,a=e.distributions,r=e.position,o=e.sampleRate,s=e.showTotals,l=e.variations,c=[];if(Array(l).fill(1).forEach(function(e,t){c.push({color:x[t],name:t?"Variation ".concat(t):"Original",data:a[t].slice(0,parseInt(r/o)),animation:{duration:0}})}),t){for(var u=[],m=[],f=[],h=[],d=0;d<=r;)u.push(i[d].totalConversionRate),m.push(i[d].counterfactualRate),f.push(i[d].totalConversions),h.push(i[d].counterfactualConversions),d+=o;c.push({animation:{duration:0},color:"black",dashStyle:"solid",data:u,lineWidth:2,marker:{enabled:!1},name:"Total Conversion Rate",tooltip:{split:!0,valueDecimals:2,valueSuffix:"%"},type:"spline",yAxis:1}),c.push({animation:{duration:0},color:"black",dashStyle:"shortdot",data:m,lineWidth:2,marker:{enabled:!1},name:"Counterfactual Conversion Rate",tooltip:{split:!0,valueDecimals:2,valueSuffix:"%"},type:"spline",yAxis:1}),s&&(c.push({animation:{duration:0},color:"white",data:f,lineWidth:2,marker:{enabled:!1},name:"Total Conversions",tooltip:{split:!0},type:"spline",yAxis:2}),c.push({animation:{duration:0},color:"white",dashStyle:"shortdot",data:h,lineWidth:2,marker:{enabled:!1},name:"Counterfactual Conversions",tooltip:{split:!0},type:"spline",yAxis:2}))}return g.a.cloneDeep(c)},n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.chartRef,n=e.counterfactualEnabled,i=e.distributions,a=e.policy,o=e.sampleRate,s=e.showTotals,l={chart:{type:n?"area":"line"},credits:{enabled:!1},plotOptions:{line:{marker:{enabled:!1}}},tooltip:{formatter:function(){return["<b>"+this.x*o+" visitors</b>"].concat(this.points.map(function(e){var t=e.y,n="% of Traffic";return e.series.name.includes("Rate")&&(n="%"),e.series.name.includes("Conversions")||(t=Number(e.y).toFixed(2)+n),e.series.name+": "+t}))},split:!0,valueSuffix:"% of Traffic"},series:this.getDistributionData(),title:{text:w.CHART_LABELS[a]},xAxis:{labels:{formatter:function(){return this.value*o}},min:0,max:parseInt(i[0].length)},yAxis:[{labels:{formatter:function(){return this.value+"%"}},title:{text:"Distribution"}}]};return n&&(l.plotOptions={area:{lineWidth:0,fillOpacity:1,marker:{enabled:!1},stacking:"percent"}},l.yAxis.push({opposite:!0,labels:{formatter:function(){return this.value+"%"}},title:{style:{color:"black"},text:"Conversion Rate"}})),s&&l.yAxis.push({opposite:!0,title:{style:{color:"white"},text:"Conversions"}}),r.a.createElement("div",{className:"flex--1"},r.a.createElement(E.a,{config:l,ref:t}))}}]),t}(a.Component),A=function(e){function t(){return Object(c.a)(this,t),Object(m.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.color,n=e.conversionCount,i=e.title,a=e.visitorCount;return r.a.createElement("div",{className:"flex flex--column flex-align--center soft--sides"},r.a.createElement("h5",null,i),r.a.createElement("p",{className:"micro muted"},"Conversions"),r.a.createElement("h3",{className:"".concat(t)},n),r.a.createElement("p",{className:"micro muted"},"Visitors"),r.a.createElement("h3",{className:"".concat(t)},a),r.a.createElement("p",{className:"micro muted"},"Conversion Rate"),r.a.createElement("h3",{className:"".concat(t)},"".concat(a?(n/a*100).toFixed(2):"0.00","%")))}}]),t}(a.Component),M=function(e){function t(){var e,n;Object(c.a)(this,t);for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=Object(m.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(a)))).formatPValue=function(){var e=n.props.pValue;return"".concat((100*(1-e)).toFixed(2),"%")},n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.color,n=e.pValue,i=e.title;return r.a.createElement("div",{className:"flex flex--column flex-align--center soft--sides width--50"},r.a.createElement("h5",null,i),r.a.createElement("h3",{className:v()(Object(l.a)({},t,n<=.1))},this.formatPValue()))}}]),t}(a.Component),I=function(e){function t(){var e,n;Object(c.a)(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(a)))).getVisitorCount=function(e){var t=n.props;return t.counts[t.position].visitors[e]},n.getConversionCount=function(e){var t=n.props;return t.counts[t.position].conversions[e]},n.getPValue=function(e){var t=n.props;return t.confidences[t.position].pValues[e]},n.isBetterThanBaseline=function(e){var t=n.getConversionCount(0)/n.getVisitorCount(0),i=n.getConversionCount(e)/n.getVisitorCount(e);return!Number.isNaN(t)&&!Number.isNaN(i)&&i>t},n.renderVariationCards=function(){var e=n.props.variations,t=0,i=0;return Array(e+1).fill(1).map(function(a,o){return o<e&&(t+=n.getConversionCount(o),i+=n.getVisitorCount(o)),o?o===e?r.a.createElement(A,{color:"black",conversionCount:t,key:o,title:"Total",visitorCount:i}):r.a.createElement(A,{color:n.getPValue(o-1)<=.1?n.isBetterThanBaseline(o)?"green":"red":"black",conversionCount:n.getConversionCount(o),key:o,title:"Variation ".concat(o),visitorCount:n.getVisitorCount(o)}):r.a.createElement(A,{color:"black",conversionCount:n.getConversionCount(0),key:o,title:"Original",visitorCount:n.getVisitorCount(0)})})},n.renderStatSigCards=function(){var e=n.props.variations;return Array(e-1).fill(1).map(function(e,t){return r.a.createElement(M,{color:n.isBetterThanBaseline(t+1)?"green":"red",key:t,pValue:n.getPValue(t),title:"Variation ".concat(t+1)})})},n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.hideGraphs,n=e.policy,i=e.variations;return r.a.createElement("div",{className:v()({"border--left":!t,flex:!0,"flex-align--center":!0,"flex--column":!0,soft:t}),style:{minWidth:"".concat(125*i,"px")}},t&&r.a.createElement("h1",null,w.CHART_LABELS[n]),r.a.createElement("div",{className:"flex flex--row flex--space width--100"},this.renderVariationCards()),r.a.createElement("h4",{className:"flex"},"Statistical Significance:"),r.a.createElement("div",{className:"flex flex--row flex--space width--100"},this.renderStatSigCards()))}}]),t}(a.Component),S=function(e){function t(e){var n;Object(c.a)(this,t),(n=Object(m.a)(this,Object(f.a)(t).call(this,e))).state={counterfactualEnabled:!1,currentPosition:0,enabledCharts:[w.MANUAL],hideGraphs:!1,interval:null,isRunning:!1,marks:{},multiplier:100,showTotals:!0},n.getNextSignificantPoint=function(){var e=n.state,t=e.currentPosition,i=e.marks,a=Object.keys(i).filter(function(e){return e>t});return a.length?Number(a[0]):t},n.getPreviousSignificantPoint=function(){var e=n.state,t=e.currentPosition,i=e.marks,a=Object.keys(i).filter(function(e){return e<t});return a.length?Number(a[a.length-1]):t},n.toggleCounterfactual=function(){n.setState(function(e){return{counterfactualEnabled:!e.counterfactualEnabled}})},n.toggleSeries=function(e){Object.values(n.chartRefs).forEach(function(t){t.current&&t.current.chart.series[e].visible?t.current.chart.series[e].hide():t.current&&!t.current.chart.series[e].visible&&t.current.chart.series[e].show()})},n.toggleTotals=function(){n.setState(function(e){return{showTotals:!e.showTotals}})},n.handleKeyDown=function(e){switch(e.keyCode){case 32:e.preventDefault(),n.state.isRunning?n.stopCounting():n.startCounting();break;case 48:n.toggleSeries(0);break;case 49:n.toggleSeries(1);break;case 50:n.toggleSeries(2);break;case 51:n.toggleSeries(3);break;case 65:n.toggleChart({target:{value:w.MANUAL}});break;case 67:n.toggleCounterfactual();break;case 69:n.stopCounting(),n.setCurrentPosition(n.maxVisitors);break;case 71:n.toggleCharts();break;case 73:n.toggleChart({target:{value:w.MIN_REGRET}});break;case 76:n.toggleChart({target:{value:w.MIN_TIME}});break;case 78:n.stopCounting(),n.setCurrentPosition(n.getNextSignificantPoint());break;case 80:n.stopCounting(),n.setCurrentPosition(n.getPreviousSignificantPoint());break;case 82:n.reset();break;case 84:n.toggleTotals()}},n.isChartEnabled=function(e){return n.state.enabledCharts.includes(e)},n.reset=function(){n.stopCounting(),n.setCurrentPosition(0)},n.setCurrentPosition=function(e){n.setState(function(){return{currentPosition:e}})},n.setTimelineMarks=function(){var e=g.a.cloneDeep(n.marks),t=[];Object.values(w.ALLOCATION_TYPES).forEach(function(i){n.isChartEnabled(i)||g.a.map(e,function(e){e.category===i&&t.push(e.key)})}),t.forEach(function(t){delete e[t]}),n.setState(function(){return{marks:e}})},n.startCounting=function(){n.state.currentPosition>=n.maxVisitors?n.setState(function(){return{currentPosition:0}},n.startInterval):n.startInterval(),n.setState(function(){return{isRunning:!0}})},n.startInterval=function(){n.setState(function(){return{interval:setInterval(function(){n.state.currentPosition>=n.maxVisitors?n.stopCounting():n.setState(function(e){return{currentPosition:e.currentPosition+e.multiplier>=n.maxVisitors?n.maxVisitors:e.currentPosition+e.multiplier}})},100)}})},n.stopCounting=function(){clearInterval(n.state.interval),n.setState(function(){return{interval:null,isRunning:!1}})},n.toggleChart=function(e){var t=e.target.value;if(n.state.enabledCharts.includes(t)){var i=g.a.cloneDeep(n.state.enabledCharts);n.setState(function(){return{enabledCharts:i.filter(function(e){return e!==t})}},n.setTimelineMarks)}else n.setState(function(e){var n=g.a.cloneDeep(e.enabledCharts);return n.push(t),{enabledCharts:n}},n.setTimelineMarks)},n.toggleCharts=function(e){n.setState(function(e){return{hideGraphs:!e.hideGraphs}})},n.sampleRate=window.uniform.length/500,n.minRegretDistributions=T.getDistributions(window.minRegret,n.sampleRate),n.minTimeDistributions=T.getDistributions(window.minTime,n.sampleRate),n.uniformDistributions=T.getDistributions(window.uniform,n.sampleRate),n.minRegretCounts=T.getCounts(window.minRegret),n.minTimeCounts=T.getCounts(window.minTime),n.uniformCounts=T.getCounts(window.uniform),n.minRegretConfidences=T.getConfidenceNumbers(window.minRegret),n.minTimeConfidences=T.getConfidenceNumbers(window.minTime),n.uniformConfidences=T.getConfidenceNumbers(window.uniform),n.maxVisitors=Math.max(window.minRegret.length,window.minTime.length,window.uniform.length),n.minRegretVariations=window.minRegret[0].trafficAllocation.length,n.minTimeVariations=window.minTime[0].trafficAllocation.length,n.uniformVariations=window.uniform[0].trafficAllocation.length,n.chartRefs={minRegretRef:r.a.createRef(),minTimeRef:r.a.createRef(),uniformRef:r.a.createRef()},n.marks=Object(l.a)({0:{style:{color:"grey"},label:"Start",category:"ALL"}},n.maxVisitors,{style:{color:"grey"},label:"End",category:"ALL"});for(var i={minRegret:new Array(n.minRegretVariations-1).fill(!1),minTime:new Array(n.minTimeVariations-1).fill(!1),uniform:new Array(n.uniformVariations-1).fill(!1)},a=(new Array(n.minTimeVariations).fill(!0),0);a<n.maxVisitors;a++)for(var o=a+(n.sampleRate-a%n.sampleRate)+2*n.sampleRate,s=0;s<n.uniformVariations-1;s++)i.minRegret[s]!==window.minRegret[a].stats[(s+1).toString()].isSignificant&&(window.minRegret[a].stats[(s+1).toString()].confInterval.lower>0?n.marks[o]={style:{color:"green"},label:"Min Regret Significant (Winner)",category:w.MIN_REGRET,key:o}:n.marks[o]={style:{color:"red"},label:"Min Regret Significant (Loser)",category:w.MIN_REGRET,key:o},i.minRegret[s]=!i.minRegret[s]),i.minTime[s]!==window.minTime[a].stats[(s+1).toString()].isSignificant&&(window.minTime[a].stats[(s+1).toString()].confInterval.lower>0?n.marks[o]={style:{color:"green"},label:"Min Time Significant (Winner)",category:w.MIN_TIME,key:o}:n.marks[o]={style:{color:"red"},label:"Min Time Significant (Loser)",category:w.MIN_TIME,key:o},i.minTime[s]=!i.minTime[s]),i.uniform[s]!==window.uniform[a].stats[(s+1).toString()].isSignificant&&(window.uniform[a].stats[(s+1).toString()].confInterval.lower>0?n.marks[o]={style:{color:"green"},label:"A/B Test Significant (Winner)",category:w.UNIFORM,key:o}:n.marks[o]={style:{color:"red"},label:"A/B Test Significant (Loser)",category:w.UNIFORM,key:o},i.uniform[s]=!i.uniform[s]);return n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.setTimelineMarks()}},{key:"render",value:function(){return r.a.createElement("div",{className:"soft--sides"},r.a.createElement("div",{className:"push--ends flex flex--row flex-align--center width--100"},r.a.createElement("div",{className:v()({"push-double--right":!0,flex:!0,"flex--column":!0})},r.a.createElement("div",{className:"flex--row micro"},r.a.createElement("input",{checked:this.isChartEnabled(w.MANUAL),id:w.MANUAL,onChange:this.toggleChart,type:"checkbox",value:w.MANUAL}),r.a.createElement("label",{htmlFor:w.MANUAL},"A/B")),r.a.createElement("div",{className:"flex--row micro"},r.a.createElement("input",{checked:this.isChartEnabled(w.MIN_REGRET),id:w.MIN_REGRET,onChange:this.toggleChart,type:"checkbox",value:w.MIN_REGRET}),r.a.createElement("label",{htmlFor:w.MIN_REGRET},"Min Regret")),r.a.createElement("div",{className:"flex--row micro"},r.a.createElement("input",{checked:this.isChartEnabled(w.MIN_TIME),id:w.MIN_TIME,onChange:this.toggleChart,type:"checkbox",value:w.MIN_TIME}),r.a.createElement("label",{htmlFor:w.MIN_TIME},"Min Time")),r.a.createElement("div",{className:"flex--row micro"},r.a.createElement("input",{checked:this.state.hideGraphs,id:"charts",onChange:this.toggleCharts,type:"checkbox"}),r.a.createElement("label",{htmlFor:"charts"},"Hide Graphs"))),r.a.createElement("div",{className:"push-double--right"},!this.state.interval&&r.a.createElement("button",{className:"no-padding",onClick:this.startCounting},r.a.createElement("div",{className:"flex square--50 flex-align--center flex-justify--center"},this.state.currentPosition!==this.maxVisitors&&r.a.createElement(N.a,{name:"play",size:"large"}),this.state.currentPosition===this.maxVisitors&&r.a.createElement(N.a,{name:"refresh",size:"large"}))),this.state.interval&&r.a.createElement("button",{className:"no-padding",onClick:this.stopCounting},r.a.createElement("div",{className:"flex square--50 flex-align--center flex-justify--center"},r.a.createElement(N.a,{name:"pause",size:"large"})))),r.a.createElement("div",{className:"flex flex--1 flex-align--center push-double--right"},r.a.createElement(C.a,{dots:!1,min:0,marks:this.state.marks,max:this.maxVisitors,onChange:this.setCurrentPosition,value:this.state.currentPosition}))),r.a.createElement("div",{className:v()({flex:this.state.hideGraphs,"flex--row":this.state.hideGraphs,"flex-justify--center":this.state.hideGraphs,"flex--space":this.state.hideGraphs})},this.isChartEnabled(w.MANUAL)&&r.a.createElement("div",{className:"flex flex--row border push--ends"},!this.state.hideGraphs&&r.a.createElement(k,{chartRef:this.chartRefs.uniformRef,counterfactualEnabled:this.state.counterfactualEnabled,counts:this.uniformCounts,distributions:this.uniformDistributions,policy:w.MANUAL,position:this.state.currentPosition,sampleRate:this.sampleRate,showTotals:this.state.showTotals,variations:this.uniformVariations}),r.a.createElement(I,{confidences:this.uniformConfidences,counts:this.uniformCounts,hideGraphs:this.state.hideGraphs,policy:w.MANUAL,position:this.state.currentPosition,variations:this.uniformVariations})),this.isChartEnabled(w.MIN_REGRET)&&r.a.createElement("div",{className:"flex flex--row border push--ends"},!this.state.hideGraphs&&r.a.createElement(k,{chartRef:this.chartRefs.minRegretRef,counterfactualEnabled:this.state.counterfactualEnabled,counts:this.minRegretCounts,distributions:this.minRegretDistributions,policy:w.MIN_REGRET,position:this.state.currentPosition,sampleRate:this.sampleRate,showTotals:this.state.showTotals,variations:this.minRegretVariations}),r.a.createElement(I,{confidences:this.minRegretConfidences,counts:this.minRegretCounts,hideGraphs:this.state.hideGraphs,policy:w.MIN_REGRET,position:this.state.currentPosition,variations:this.minRegretVariations})),this.isChartEnabled(w.MIN_TIME)&&r.a.createElement("div",{className:"flex flex--row border push--ends"},!this.state.hideGraphs&&r.a.createElement(k,{chartRef:this.chartRefs.minTimeRef,counterfactualEnabled:this.state.counterfactualEnabled,counts:this.minTimeCounts,distributions:this.minTimeDistributions,policy:w.MIN_TIME,position:this.state.currentPosition,sampleRate:this.sampleRate,showTotals:this.state.showTotals,variations:this.minTimeVariations}),r.a.createElement(I,{confidences:this.minTimeConfidences,counts:this.minTimeCounts,hideGraphs:this.state.hideGraphs,policy:w.MIN_TIME,position:this.state.currentPosition,variations:this.minTimeVariations}))))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(S,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},77:function(e,t,n){e.exports=n(146)},82:function(e,t,n){},85:function(e,t,n){}},[[77,2,1]]]);
//# sourceMappingURL=main.4886d023.chunk.js.map