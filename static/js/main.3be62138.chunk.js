(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{146:function(e,t,n){"use strict";n.r(t);var i,a=n(1),r=n.n(a),o=n(6),s=n.n(o),l=(n(82),n(26)),c=n(27),u=n(29),m=n(28),f=n(30),h=n(20),d=n.n(h),p=n(71),v=n.n(p),g=(n(85),n(72)),E=n.n(g),b=n(76),C=n(40),w=n.n(C),x=n(41),N={ALLOCATION_TYPES:{MANUAL:"MANUAL",MIN_REGRET:"MIN_REGRET",MIN_TIME:"MIN_TIME"},CHART_LABELS:(i={},Object(x.a)(i,"MANUAL","Standard A/B"),Object(x.a)(i,"MIN_REGRET","Min Regret (Accelerated Impact)"),Object(x.a)(i,"MIN_TIME","Min Time (Accelerated Learning)"),i),MANUAL:"MANUAL",MIN_REGRET:"MIN_REGRET",MIN_TIME:"MIN_TIME"},A=function(e){return e.map(function(e){return parseInt(1e4*e)/100})},R={getConfidenceNumbers:function(e){var t=e[0].trafficAllocation.length-1,n=[{pValues:Array(t).fill(1),confidenceIntervals:Array(t).fill([-1/0,1/0])}];return e.forEach(function(e){n.push({pValues:Object.values(e.stats).map(function(e){return e.pValue}),confidenceIntervals:Object.values(e.stats).map(function(e){return e.confInterval})})}),n},getCounts:function(e){var t=e[0].trafficAllocation.length,n=[{conversions:Array(t).fill(0),visitors:Array(t).fill(0)}];return e.forEach(function(e){var t=d.a.cloneDeep(n[n.length-1]);t.visitors[e.variation]=t.visitors[e.variation]+1,e.convert&&(t.conversions[e.variation]=t.conversions[e.variation]+1),n.push(t)}),n},getDistributions:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=Array(e[0].trafficAllocation.length).fill([]),i=A(d.a.cloneDeep(e[0].trafficAllocation)),a=[];return n.forEach(function(e,t){a[t]=[i[t]]}),e.forEach(function(e,i){var r=A(e.trafficAllocation);n.forEach(function(e,n){i%t||a[n].push(r[n])})}),a}},y=(n(144),function(e){function t(){var e,n;Object(l.a)(this,t);for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(a)))).getDistributionData=function(){var e=n.props,t=e.distributions,i=e.position,a=e.sampleRate,r=e.variations,o=[];return Array(r).fill(1).forEach(function(e,n){o.push({name:n?"Variation ".concat(n):"Original",data:t[n].slice(0,parseInt(i/a)),animation:{duration:0}})}),d.a.cloneDeep(o)},n}return Object(f.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.policy,n=e.sampleRate,i=e.distributions,a=r.a.createRef(),o={credits:{enabled:!1},plotOptions:{line:{marker:{enabled:!1}}},series:this.getDistributionData(),title:{text:N.CHART_LABELS[t]},xAxis:{labels:{formatter:function(){return this.value*n}},min:0,max:parseInt(i[0].length)},yAxis:{title:{text:"Distribution"}}};return r.a.createElement("div",{className:"flex--1"},r.a.createElement(E.a,{config:o,ref:a}))}}]),t}(a.Component)),M=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.conversionCount,n=e.title,i=e.visitorCount;return r.a.createElement("div",{className:"flex flex--column flex-align--center soft--sides"},r.a.createElement("h5",null,n),r.a.createElement("p",{className:"micro muted"},"Conversions"),r.a.createElement("h3",null,t),r.a.createElement("p",{className:"micro muted"},"Visitors"),r.a.createElement("h3",null,i),r.a.createElement("p",{className:"micro muted"},"Conversion Rate"),r.a.createElement("h3",null,"".concat(i?(t/i*100).toFixed(2):"0.00","%")))}}]),t}(a.Component),I=function(e){function t(){var e,n;Object(l.a)(this,t);for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(a)))).formatPValue=function(){return(100*(1-n.props.pValue)).toFixed(2)},n}return Object(f.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.pValue,n=e.title;return r.a.createElement("div",{className:"flex flex--column flex-align--center soft--sides width--50"},r.a.createElement("h5",null,n),r.a.createElement("h3",{className:v()({green:t<=.1})},this.formatPValue()))}}]),t}(a.Component),T=function(e){function t(){var e,n;Object(l.a)(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(a)))).getVisitorCount=function(e){var t=n.props;return t.counts[t.position].visitors[e]},n.getConversionCount=function(e){var t=n.props;return t.counts[t.position].conversions[e]},n.getPValue=function(e){var t=n.props;return t.confidences[t.position].pValues[e]},n.renderVariationCards=function(){var e=n.props.variations,t=0,i=0;return Array(e+1).fill(1).map(function(a,o){return o<e&&(t+=n.getConversionCount(o),i+=n.getVisitorCount(o)),o?o===e?r.a.createElement(M,{conversionCount:t,key:o,title:"Total",visitorCount:i}):r.a.createElement(M,{conversionCount:n.getConversionCount(o),key:o,title:"Variation ".concat(o),visitorCount:n.getVisitorCount(o)}):r.a.createElement(M,{conversionCount:n.getConversionCount(0),key:o,title:"Original",visitorCount:n.getVisitorCount(0)})})},n.renderStatSigCards=function(){var e=n.props.variations;return Array(e-1).fill(1).map(function(e,t){return r.a.createElement(I,{key:t,pValue:n.getPValue(t),title:"Variation ".concat(t+1)})})},n}return Object(f.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.variations;return r.a.createElement("div",{className:"border--left flex flex-align--center flex--column",style:{minWidth:"".concat(125*e,"px")}},r.a.createElement("div",{className:"flex flex--row flex--space width--100"},this.renderVariationCards()),r.a.createElement("h4",{className:"flex"},"Statistical Significance:"),r.a.createElement("div",{className:"flex flex--row flex--space width--100"},this.renderStatSigCards()))}}]),t}(a.Component),V=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={currentPosition:0,enabledCharts:[N.MANUAL],interval:null,isRunning:!1,multiplier:100},n.handleKeyDown=function(e){switch(e.keyCode){case 32:e.preventDefault(),n.state.isRunning?n.stopCounting():n.startCounting()}},n.isChartEnabled=function(e){return n.state.enabledCharts.includes(e)},n.setCurrentPosition=function(e){n.setState(function(){return{currentPosition:e}})},n.startCounting=function(){n.state.currentPosition>=n.maxVisitors?n.setState(function(){return{currentPosition:0}},n.startInterval):n.startInterval(),n.setState(function(){return{isRunning:!0}})},n.startInterval=function(){n.setState(function(){return{interval:setInterval(function(){n.state.currentPosition>=n.maxVisitors?n.stopCounting():n.setState(function(e){return{currentPosition:e.currentPosition+e.multiplier>=n.maxVisitors?n.maxVisitors:e.currentPosition+e.multiplier}})},100)}})},n.stopCounting=function(){clearInterval(n.state.interval),n.setState(function(){return{interval:null,isRunning:!1}})},n.toggleChart=function(e){var t=e.target.value;if(n.state.enabledCharts.includes(t)){var i=d.a.cloneDeep(n.state.enabledCharts);n.setState(function(){return{enabledCharts:i.filter(function(e){return e!==t})}})}else n.setState(function(e){var n=d.a.cloneDeep(e.enabledCharts);return n.push(t),{enabledCharts:n}})},n.sampleRate=window.uniform.length/500,n.minRegretDistributions=R.getDistributions(window.minRegret,n.sampleRate),n.minTimeDistributions=R.getDistributions(window.minTime,n.sampleRate),n.uniformDistributions=R.getDistributions(window.uniform,n.sampleRate),n.minRegretCounts=R.getCounts(window.minRegret),n.minTimeCounts=R.getCounts(window.minTime),n.uniformCounts=R.getCounts(window.uniform),n.minRegretConfidences=R.getConfidenceNumbers(window.minRegret),n.minTimeConfidences=R.getConfidenceNumbers(window.minTime),n.uniformConfidences=R.getConfidenceNumbers(window.uniform),n.maxVisitors=Math.max(window.minRegret.length,window.minTime.length,window.uniform.length),n.minRegretVariations=window.minRegret[0].trafficAllocation.length,n.minTimeVariations=window.minTime[0].trafficAllocation.length,n.uniformVariations=window.uniform[0].trafficAllocation.length,n}return Object(f.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown)}},{key:"render",value:function(){var e={0:{style:{color:"grey"},label:"Start"},20000:{style:{color:"grey"},label:"End"}};return this.isChartEnabled(N.MANUAL)&&(e[7900]={style:{color:"red"},label:"A/B Significant (Loser)"}),this.isChartEnabled(N.MIN_TIME)&&(e[13200]={style:{color:"green"},label:"Min Time Significant (Winner)"},e[4650]={style:{color:"red"},label:"Min Time Significant (Loser)"}),r.a.createElement("div",{className:"soft--sides"},r.a.createElement("div",{className:"push--ends flex flex--row flex-align--center width--100"},r.a.createElement("div",{className:"push-double--right flex flex--column"},r.a.createElement("div",{className:"flex--row micro"},r.a.createElement("input",{checked:this.isChartEnabled(N.MANUAL),onChange:this.toggleChart,type:"checkbox",value:N.MANUAL}),r.a.createElement("label",null,"A/B")),r.a.createElement("div",{className:"flex--row micro"},r.a.createElement("input",{checked:this.isChartEnabled(N.MIN_REGRET),onChange:this.toggleChart,type:"checkbox",value:N.MIN_REGRET}),r.a.createElement("label",null,"Min Regret")),r.a.createElement("div",{className:"flex--row micro"},r.a.createElement("input",{checked:this.isChartEnabled(N.MIN_TIME),onChange:this.toggleChart,type:"checkbox",value:N.MIN_TIME}),r.a.createElement("label",null,"Min Time"))),r.a.createElement("div",{className:"push-double--right"},!this.state.interval&&r.a.createElement("button",{className:"no-padding",onClick:this.startCounting},r.a.createElement("div",{className:"flex square--50 flex-align--center flex-justify--center"},this.state.currentPosition!==this.maxVisitors&&r.a.createElement(w.a,{name:"play",size:"large"}),this.state.currentPosition===this.maxVisitors&&r.a.createElement(w.a,{name:"refresh",size:"large"}))),this.state.interval&&r.a.createElement("button",{className:"no-padding",onClick:this.stopCounting},r.a.createElement("div",{className:"flex square--50 flex-align--center flex-justify--center"},r.a.createElement(w.a,{name:"pause",size:"large"})))),r.a.createElement("div",{className:"flex flex--1 flex-align--center push-double--right"},r.a.createElement(b.a,{dots:!1,min:0,marks:e,max:this.maxVisitors,onChange:this.setCurrentPosition,value:this.state.currentPosition}))),this.isChartEnabled(N.MANUAL)&&r.a.createElement("div",{className:"flex flex--row border push--ends"},r.a.createElement(y,{distributions:this.uniformDistributions,policy:N.MANUAL,position:this.state.currentPosition,sampleRate:this.sampleRate,variations:this.uniformVariations}),r.a.createElement(T,{confidences:this.uniformConfidences,counts:this.uniformCounts,position:this.state.currentPosition,variations:this.uniformVariations})),this.isChartEnabled(N.MIN_REGRET)&&r.a.createElement("div",{className:"flex flex--row border push--ends"},r.a.createElement(y,{distributions:this.minRegretDistributions,policy:N.MIN_REGRET,position:this.state.currentPosition,sampleRate:this.sampleRate,variations:this.minRegretVariations}),r.a.createElement(T,{confidences:this.minRegretConfidences,counts:this.minRegretCounts,position:this.state.currentPosition,variations:this.minRegretVariations})),this.isChartEnabled(N.MIN_TIME)&&r.a.createElement("div",{className:"flex flex--row border push--ends"},r.a.createElement(y,{distributions:this.minTimeDistributions,policy:N.MIN_TIME,position:this.state.currentPosition,sampleRate:this.sampleRate,variations:this.minTimeVariations}),r.a.createElement(T,{confidences:this.minTimeConfidences,counts:this.minTimeCounts,position:this.state.currentPosition,variations:this.minTimeVariations})))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(V,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},77:function(e,t,n){e.exports=n(146)},82:function(e,t,n){},85:function(e,t,n){}},[[77,2,1]]]);
//# sourceMappingURL=main.3be62138.chunk.js.map